<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width-device0-width, initial-scale = 1.0">
        <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

        <!-- Latest compiled JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="index.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;700&display=swap" rel="stylesheet">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
        <div class="topnav">
            <a href="#purpose">Sources of CO2 Emission</a>
            <a href="#world">C02 Emissions</a>
            <a href="#malaysia">Temperature</a>
        </div>
        <div class="row">
            <div class="col">
                <div class="h1-title" id="purpose">World C02 Emissions</div>
            </div>
            <div class="col">
                <div class="h3-title">A breakdown of the sources of C02 Emissions across the world</div>
            </div>
            <div class="col-sm-4">
                <div class="title-container-child">
                    <div class="h2-title">About</div>
                    <p class="p-section">
                        The purpose of this visualization is to visualise global CO2 emissions 
                        <br>and it's effects on global temperature. 
                        <br><br>Firstly, this visualization will be exploring the trend of global CO2 
                        <br>emissions over time.
                        <br><br>We will then explore the sources of CO2 emissions. The 
                        <br>effects on temperature will be visualised.Lastly, we will be 
                        <br>exploring Malaysia's CO2 emissions and how it has affected the country's temperature
                    </p>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="title-container-child">
                    <div class="h2-title">What is CO2 Emission?</div>
                    <p class="p-section">
                        CO2 emission is defined as the release of Carbon Dioxide 
                        <br>into the atmosphere
                        <br><br>CO2 emission causes a variety of global problems. Most prominently, 
                        
                        <br>global warming, which causes the greenhouse effect, resulting in 
                        <br>increasing global temperature.
                        <br><br>From there, rising global temperatures causes a cascading array of problems 
                    </p>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="h2-title">Keywords</div>
                <p class="p-section">
                    <b>Kilotons</b> : <i>A unit of weight, 1000 kilograms</i>
                    <br><br><b>Celsius</b> : <i>A unit of temperature</i>
                    <br><br><b>CO2</b> : <i>Carbon dioxide</i>
                    <br><br><b>Emission</b> : <i>Release of a substance</i>
                    <br><br><b>Per capita</b> : <i>Average per person</i>
                </p>
            </div>
        </div>
        </div>
        <div class="parent-container" >
            <div class="row">
                <div class="col">
                    <div class="h1-section-title" id="world">CO2 Emissions over time</div>
                </div>
                <div class="col-sm-6">
                    <div class="child-container">
                        <div class="h1-section">The Trend of CO2 Emissions</div>
                        <div class="p-section">
                            CO2 emissions are a <b>prominent problem</b> in today's society. 
                            <br><br>In the world map on the right, we can see the breakdown of the world's C02 emissions per capita over time
                            <br><br><b style="color: #f83c24;">Red</b> means a country is producing around 15 to 20 kilotons of CO2 in that year
                            <br><br>Over the span of 59 Years, we can see a definite and dramatic <b>increase</b> of CO2 emissions
                            <br><br>Particularly, in <b>Saudi Arabia, Australia and Asia</b>, which are all producing close to 20 kilotons of CO2 in 2019.
                            <br><br>In Malaysia, we can see that in 2000, we were producing <b>5.5 kilotons per capita</b>. Presently, we produce <b>8 kilotons per capita</b>
                            <br><br>Try sliding the Year slider to see the change in CO2 emissions globally.
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 text-center">
                    <div class="chart-container">
                        <div id="co2_emissions_total"></div>
                        <script type="text/javascript">
                            var yourVlSpec = 
                            {
                                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                                "width": "container",
                                "height": "container",
                                "projection": {
                                    "type": "equalEarth",
                                    "center": {"expr": "center_to"},
                                    "scale": {"expr": "zoom_level"}
                                },
                                "params": [
                                    {
                                    "name": "Year_selection",
                                    "value": 1961,
                                    "bind": {
                                        "input": "range",
                                        "min": 1961,
                                        "max": 2019,
                                        "step": 1,
                                        "name": "Year: "
                                    }
                                    },
                                    {
                                    "name": "zoom_level",
                                    "value": 100,
                                    "bind": {
                                        "input": "range",
                                        "min": 100,
                                        "max": 650,
                                        "step": 50,
                                        "name": "Zoom: "
                                    }
                                    },
                                    {
                                    "name": "center_to",
                                    "value": [0, 0],
                                    "bind": {
                                        "input": "select",
                                        "options": [
                                        [0, 0],
                                        [30, 0],
                                        [90, 20],
                                        [135, -25],
                                        [35, 55],
                                        [-95, 45],
                                        [-60, -20],
                                        [100,0]
                                        ],
                                        "labels": [
                                        "World",
                                        "Africa",
                                        "Asia",
                                        "Australia",
                                        "Europe",
                                        "North America",
                                        "South America",
                                        "Malaysia"
                                        ],
                                        "name": "Map Centre: "
                                    }
                                    }
                                ],
                                "layer": [
                                    {
                                    "data": {
                                        "url": "https://raw.githubusercontent.com/RyanKoh03/FIT3179hw10/main/ne_110m_admin_0_countries.json",
                                        "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
                                    },
                                    "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "white"}
                                    },
                                    {
                                    "data": {
                                        "url": "https://raw.githubusercontent.com/RyanKoh03/FIT3179hw10/main/ne_110m_ocean.topojson",
                                        "format": {"type": "topojson", "feature": "oceans"}
                                    },
                                    "mark": {"type": "geoshape", "fill": "skyblue", "stroke": "null"}
                                    },
                                    {
                                    "data": {
                                        "url": "https://raw.githubusercontent.com/RyanKoh03/FIT3179hw10/main/ne_110m_graticules_30.json",
                                        "format": {"type": "topojson", "feature": "ne_110m_graticules_30"}
                                    },
                                    "mark": {"type": "geoshape", "fill": null, "stroke": "lightgrey"}
                                    },
                                    {
                                    "data": {
                                        "url": "https://raw.githubusercontent.com/RyanKoh03/FIT3179A2/main/data/global_emissions_cleaned_time_percapita.csv"
                                    },
                                    "transform": [
                                        {
                                        "lookup": "Country",
                                        "from": {
                                            "data": {
                                            "url": "https://raw.githubusercontent.com/RyanKoh03/FIT3179hw10/main/ne_110m_admin_0_countries.json",
                                            "format": {
                                                "type": "topojson",
                                                "feature": "ne_110m_admin_0_countries"
                                            }
                                            },
                                            "key": "properties.NAME"
                                        },
                                        "as": "geo"
                                        },
                                        {"filter": "datum.Year == Year_selection"}
                                    ],
                                    "mark": {"type": "geoshape"},
                                    "encoding": {
                                        "description": {"field": "Country"},
                                        "shape": {"field": "geo", "type": "geojson"},
                                        "color": {"field":"Total", 
                                        "type":"quantitative",
                                        "scale" : {
                                        "type" : "threshold",
                                        "domain": [5,10,15,20],
                                        "scheme": "yelloworangered"
                                            },
                                        "legend":{
                                            "title":"CO2 Emissions per capita",
                                            "orient":"top"
                                            },
                                        },
                                        "tooltip": [
                                        {"field": "Country", "type": "nominal", "title": "Country"},
                                        {"field": "Total", "type": "quantitative","format":".2f","title":"CO2 Emissions per capita in kilotons"},
                                        {"field":"Year","type":"quantitative"}
                                        ]
                                    }
                                    },
                                    {
                                    "data": {
                                        "url": "https://raw.githubusercontent.com/RyanKoh03/FIT3179A2/main/data/continents.csv"
                                    },
                                    "mark": {
                                        "type": "text",
                                        "color": "black",
                                        "fontWeight": "bolder",
                                        "fontSize": 11
                                    },
                                    "encoding": {
                                        "text": {"field": "Continent", "type": "nominal"},
                                        "latitude": {"field": "Latitude", "type": "quantitative"},
                                        "longitude": {"field": "Longitude", "type": "quantitative"}
                                    }
                                    }
                                ]
                            } 
                            vegaEmbed('#co2_emissions_total ', yourVlSpec);
                        </script>
                    </div>
                </div> 
            </div>
        </div>
        <div class="parent-container">     
            <div class="row">
                <div class="col">
                    <div class="h1-section-title" id="purpose">Sources of CO2 Emission</div>
                </div>
                <div class="col-sm-6 text-center">
                    <div class="child-container">
                        <div class="h1-section">Breakdown of CO2 Sources</div>
                        <p class="p-section">Let's explore the main culprits of global CO2 emissions.
                            <br><br>In the donut chart on the right, we can see the breakdown of the world's C02 emissions over time by percentages.
                            <br>We can see that over the span of 59 years, <b>Oil and Coal</b> make up over 90% of the global CO2 Emissions
                            <br><br>In <b>Malaysia</b> in particular, there has been a definite increase of the use of <b>Coal</b> around the turn of the century.
                            <br><br>However, we can see that the last 10 years, we have decreased the use of <b>Cement</b> as it contributes less to the CO2 Emissions of Malaysia
                            <br><br>Try selecting your country to see the breakdown of the sources of it's CO2 emissions!
                        </p>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="chart-container">
                        <div id="emission_donutchart"></div>
                        <script type="text/javascript">
                            var yourVlSpec = 
                            {
                                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                                "width":"container",
                                "height":"container",
                                "data": {
                                    "url": "https://raw.githubusercontent.com/RyanKoh03/FIT3179A2/main/data/emission_source_cleaned.csv"
                                },
                                "params": [
                                    {
                                        "name": "Country",
                                        "bind": {
                                            "input": "select",
                                            "options": [
                                                "All countries",
                                                "Afghanistan",
                                                "Albania",
                                                "Algeria",
                                                "Angola",
                                                "Argentina",
                                                "Armenia",
                                                "Australia",
                                                "Austria",
                                                "Azerbaijan",
                                                "Bahamas", 
                                                "Bahrain", 
                                                "Bangladesh",
                                                "Barbados",
                                                "Malaysia",
                                                "China"
                                            ]
                                        }
                                    },
                                    {
                                        "name": "Year_selection",
                                        "value": 1961,
                                        "bind": {
                                        "input": "range",
                                        "min": 1961,
                                        "max": 2019,
                                        "step": 1,
                                        "name": "Year"
                                        }
                                    }
                        
                                ],
                                "transform": [
                                    {
                                        "filter": "if(Country !=null, datum.Country == Country, datum.Country == 'All countries') & datum.Year == Year_selection"
                                    }
                                ],
                                "encoding": {
                                    "theta": {
                                        "field": "value", 
                                        "type": "quantitative",
                                        "stack": true
                                    },
                                    "color": {
                                        "field": "variable", 
                                        "type": "ordinal",
                                        "scale": {"scheme": "blues"},
                                        "title": "Emission Source",
                                        "legend": {
                                            "labelColor": "black",
                                            "titleColor": "black",
                                            "labelFontSize":15,
                                            "titleFontSize":20,
                                            "orient":"top"
                                        }
                                    },
                                    "tooltip": [
                                        {"field": "variable", "type": "nominal", "title": "Emission Source:"},
                                        {"field": "value", "type": "quantitative", "title": "Percentage of Emission:","format":".2f"}
                                    ]
                                },
                                "layer": [
                                    {
                                        "mark": {"type": "arc", "outerRadius": 150, "innerRadius": 100}
                                    },
                                    {
                                        "mark": {
                                            "type": "text", 
                                            "radius": 190,
                                            "size":20,
                                            "fontWeight":"bold"
                                        },
                                        "encoding": {
                                            "text": {"field": "value", "type": "quantitative","format":".2f"}
                                        }
                                    },
                                    {
                                        "mark": {"type": "text","size":25},
                                        "encoding": {
                                            "opacity": {"value": 1},
                                            "color": {"value": "black"},
                                            "text": {"value": "C02 Emissions"}
                                        }
                                    }
                                ],
                                "config": {
                                    "background": "white",
                                    "view": {"stroke": "transparent"}
                                } 
                            }    
                            vegaEmbed('#emission_donutchart ', yourVlSpec);
                        </script>
                    </div>
                </div>
            </div>
        </div>
        <div class="parent-container">
            <div class="row">
                <div class="col">
                    <div class="h1-section-title" style="padding-bottom: 2%;">Our World is <b style="color: red;">Heating up!!!</b></div>
                    <div class="p-section" style="margin-top: 0%;text-align: center;margin-bottom: 2%;">
                        Wouldn't you say that these past few years have felt much warmer? 
                        <br>Ever wondered how much warmer our Earth gets every year?
                    </div>
                </div>
                <div class="col text-center">
                    <div class="h1-section">
                        Yearly Average Global Temperature Change
                    </div>
                </div>
            </div>
            <div class="chart-container">
                <div id="temp_change"></div>
                <script type="text/javascript">
                    var yourVlSpec = 
                    {
                        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                        "width": "container",
                        "height": "container",
                        "projection": {
                        "type": "equalEarth",
                        },
                        "params": [
                        {
                            "name": "Year_selection",
                            "value": 1961,
                            "bind": {
                            "input": "range",
                            "min": 1961,
                            "max": 2019,
                            "step": 1,
                            "name": "Year: "
                            }
                        }
                        ],
                        "layer": [
                        {
                            "data": {
                            "url": "https://raw.githubusercontent.com/RyanKoh03/FIT3179hw10/main/ne_110m_admin_0_countries.json",
                            "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
                            },
                            "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "white"}
                        },
                        {
                            "data": {
                            "url": "https://raw.githubusercontent.com/RyanKoh03/FIT3179hw10/main/ne_110m_ocean.topojson",
                            "format": {"type": "topojson", "feature": "oceans"}
                            },
                            "mark": {"type": "geoshape", "fill": "skyblue", "stroke": "null"}
                        },
                        {
                            "data": {
                            "url": "https://raw.githubusercontent.com/RyanKoh03/FIT3179hw10/main/ne_110m_graticules_30.json",
                            "format": {"type": "topojson", "feature": "ne_110m_graticules_30"}
                            },
                            "mark": {"type": "geoshape", "fill": null, "stroke": "lightgrey"}
                        },
                        {
                            "data": {
                            "url": "https://raw.githubusercontent.com/RyanKoh03/FIT3179A2/main/data/temp_change_clean.csv"
                            },
                            "transform": [
                            {
                                "lookup": "Country",
                                "from": {
                                "data": {
                                    "url": "https://raw.githubusercontent.com/RyanKoh03/FIT3179hw10/main/ne_110m_admin_0_countries.json",
                                    "format": {
                                    "type": "topojson",
                                    "feature": "ne_110m_admin_0_countries"
                                    }
                                },
                                "key": "properties.NAME"
                                },
                                "as": "geo"
                            },
                            {"filter": "datum.variable == Year_selection"}
                            ],
                            "mark": {"type": "geoshape"},
                            "encoding": {
                            "description": {"field": "Area"},
                            "shape": {"field": "geo", "type": "geojson"},
                            "color": {
                                "field": "val",
                                "type": "quantitative",
                                "scale": {
                                "scheme": "blueorange",
                                "type": "threshold",
                                "domain":[-0.5,0,0.5,1]
                                },
                                "legend":{
                                    "title":"Temperature change in Celsius",
                                    "orient":"top"
                                }
                            },
                            "tooltip": [
                                {"field": "Country", "type": "nominal", "title": "Country"},
                                {"field": "val", "type": "quantitative","title":"Temperature Change","format":".2f"},
                                {"field": "variable", "type": "quantitative","title":"Year"}
                            ]
                            }
                        },
                        {
                            "data": {
                            "url": "https://raw.githubusercontent.com/RyanKoh03/FIT3179A2/main/data/continents.csv"
                            },
                            "mark": {
                            "type": "text",
                            "color": "black",
                            "fontWeight": "bolder",
                            "fontSize": 11
                            },
                            "encoding": {
                            "text": {"field": "Continent", "type": "nominal"},
                            "latitude": {"field": "Latitude", "type": "quantitative"},
                            "longitude": {"field": "Longitude", "type": "quantitative"}
                            }
                        }
                        ]
                    }
                    vegaEmbed('#temp_change', yourVlSpec);
                </script>
                
            </div>
            <div class="row">
                <div class="col-sm-6">
                    <div class="p-section">
                        Above, we can see the <b>yearly average temperature change</b> for each country. 
                        <br><br>For simplification, 
                        <b style="color: #2596be;">blue</b> means there was a <b>decrease in temperature</b> for that year, 
                        <b style="color: #e08424;">orange</b> means that there was an<b> increase in temperature</b> for that year
                        and <b>white</b> means <b>little to no change in temperature</b> for that year.
                        <br><br>Try moving the Year Slider to observe the change in temperature over time
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="p-section">
                        When you move the slider to increase the years, 
                        We can see a definite trend of temperature change increasing. 
                        This is most evident during the turn of the century, as more and more countries
                        report an increase in temperature
                
                        <br><br>In 2019, we can see almost all countries are reporting an increase of at least 1 degree Celsius for that year,
                        with no countries reporting a decrease and very few countries reporting little to no change in temperature 
                    </div>
                </div>
            </div>
        </div>
        <div class="parent-container">
            <div class="row">
                <div class="col">
                    <div class="h1-section-title">Correlation between CO2 Emissions and Global Temperature</div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6">
                    <div class="chart-container">
                        <div id="correlation_line"></div>
                        <script type="text/javascript">
                            var yourVlSpec = 
                            {
                                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                                "width": "container",
                                "height": "container",
                                "data": {"url": "https://raw.githubusercontent.com/RyanKoh03/FIT3179A2/main/data/global_emissions_temperature.csv"},
                                "transform": [
                                    {"fold": ["temp_change", "co2_emissions"]}
                                ],
                                "mark": "line",
                                "encoding": {
                                    "x": {"field": "year", "type": "temporal","axis":{
                                    "domain": false,
                                    "grid": false,
                                    "ticks": false
                                    }},
                                    "y": {"field": "value", "type": "quantitative","title":"Change in Emission and Temperature","axis":{
                                    "domain": false,
                                    "grid": false,
                                    "ticks": false
                                    }},
                                    "color": {"field": "key", "type": "nominal","legend":{
                                    "title":"Type",
                                    "labelExpr": "datum.label == 'co2_emissions' ? 'CO2 Emissions' : datum.label == 'temp_change' ? 'Temperature Change' :''" ,
                                    "orient":"left",
                                    "labelFontSize":14,
                                    "titleFontSize":16
                                    }},
                                    "tooltip":[
                                    {"field":"co2_emissions","type": "quantitative","title":"CO2 Emission in kilotons ","format":".2f"},
                                    {"field":"temp_change","type": "quantitative","title":"Temperature change in Celsius","format":".2f"},
                                    {"field":"year","type": "temporal","title":"Year","timeUnit":"binnedutcyear"}
                                    ]
                                }
                                }
                            vegaEmbed('#correlation_line', yourVlSpec);
                        </script>
                    </div>
                </div> 
                <div class="col-sm-6">
                    <div class="child-container">
                        <div class="h1-section">What's the correlation?</div>
                        <p class="p-section">
                            In the line chart on the left, we can see a definite correlation between <b style="color: #2596be;">CO2 emissions</b> and the <b style="color: #e08424;">change in global temperature</b>
                            <br><br>1 unit on the Y-axis represents 1 kiloton of CO2 emission / 1 degree celsius
                            <br><br>We can see a clear <b>increase</b> of both <b style="color: #2596be;">CO2 emissions</b> and <b style="color: #e08424;">temperature</b> as time increases
                            <br><br>The yearly average global temperature increase has changed from <b>0.11</b> degree Celsius to <b>1.37</b> degrees.
                            <br><br>This means our globe averaged an increase of 1.37 degrees Celsius worldwide in 2019
                            <br><br>This is a clear indication of CO2 Emissions having an adverse effect on the global temperature
                            <br><br>Next, let's explore the top 5 countries 
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
